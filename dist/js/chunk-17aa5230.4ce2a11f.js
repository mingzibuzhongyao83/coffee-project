(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17aa5230"],{"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),o=a("17c2"),i=a("9112");for(var c in n){var s=r[c],u=s&&s.prototype;if(u&&u.forEach!==o)try{i(u,"forEach",o)}catch(f){u.forEach=o}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("a640"),o=a("ae40"),i=n("forEach"),c=o("forEach");t.exports=i&&c?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var r=a("23e7"),n=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4d63":function(t,e,a){var r=a("83ab"),n=a("da84"),o=a("94ca"),i=a("7156"),c=a("9bf2").f,s=a("241c").f,u=a("44e7"),f=a("ad6d"),d=a("9f7f"),l=a("6eeb"),v=a("d039"),g=a("69f3").set,h=a("2626"),p=a("b622"),b=p("match"),m=n.RegExp,y=m.prototype,O=/a/g,k=/a/g,E=new m(O)!==O,D=d.UNSUPPORTED_Y,_=r&&o("RegExp",!E||D||v((function(){return k[b]=!1,m(O)!=O||m(k)==k||"/a/i"!=m(O,"i")})));if(_){var C=function(t,e){var a,r=this instanceof C,n=u(t),o=void 0===e;if(!r&&n&&t.constructor===C&&o)return t;E?n&&!o&&(t=t.source):t instanceof C&&(o&&(e=f.call(t)),t=t.source),D&&(a=!!e&&e.indexOf("y")>-1,a&&(e=e.replace(/y/g,"")));var c=i(E?new m(t,e):m(t,e),r?this:y,C);return D&&a&&g(c,{sticky:a}),c},x=function(t){t in C||c(C,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},$=s(m),w=0;while($.length>w)x($[w++]);y.constructor=C,C.prototype=y,l(n,"RegExp",C)}h("RegExp")},"4d70":function(t,e,a){"use strict";var r=a("e299"),n=a.n(r);n.a},"4de4":function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").filter,o=a("1dde"),i=a("ae40"),c=o("filter"),s=i("filter");r({target:"Array",proto:!0,forced:!c||!s},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,a){"use strict";var r=a("d784"),n=a("825a"),o=a("7b0b"),i=a("50c4"),c=a("a691"),s=a("1d80"),u=a("8aa5"),f=a("14c3"),d=Math.max,l=Math.min,v=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,a,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(a,r){var n=s(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n,r):e.call(String(n),a,r)},function(t,r){if(!b&&m||"string"===typeof r&&-1===r.indexOf(y)){var o=a(e,t,this,r);if(o.done)return o.value}var s=n(t),v=String(this),g="function"===typeof r;g||(r=String(r));var h=s.global;if(h){var k=s.unicode;s.lastIndex=0}var E=[];while(1){var D=f(s,v);if(null===D)break;if(E.push(D),!h)break;var _=String(D[0]);""===_&&(s.lastIndex=u(v,i(s.lastIndex),k))}for(var C="",x=0,$=0;$<E.length;$++){D=E[$];for(var w=String(D[0]),j=d(l(c(D.index),v.length),0),S=[],P=1;P<D.length;P++)S.push(p(D[P]));var R=D.groups;if(g){var T=[w].concat(S,j,v);void 0!==R&&T.push(R);var M=String(r.apply(void 0,T))}else M=O(w,v,j,S,R,r);j>=x&&(C+=v.slice(x,j)+M,x=j+w.length)}return C+v.slice(x)}];function O(t,a,r,n,i,c){var s=r+t.length,u=n.length,f=h;return void 0!==i&&(i=o(i),f=g),e.call(c,f,(function(e,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,r);case"'":return a.slice(s);case"<":c=i[o.slice(1,-1)];break;default:var f=+o;if(0===f)return e;if(f>u){var d=v(f/10);return 0===d?e:d<=u?void 0===n[d-1]?o.charAt(1):n[d-1]+o.charAt(1):e}c=n[f-1]}return void 0===c?"":c}))}}))},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");var r=a("ade3");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},7156:function(t,e,a){var r=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var o,i;return n&&"function"==typeof(o=e.constructor)&&o!==a&&r(i=o.prototype)&&i!==a.prototype&&n(t,i),t}},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),i=a("a640"),c=[].join,s=n!=Object,u=i("join",",");r({target:"Array",proto:!0,forced:s||!u},{join:function(t){return c.call(o(this),void 0===t?",":t)}})},ade3:function(t,e,a){"use strict";function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return r}))},b64b:function(t,e,a){var r=a("23e7"),n=a("7b0b"),o=a("df75"),i=a("d039"),c=i((function(){o(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(t){return o(n(t))}})},bee2:function(t,e,a){"use strict";function r(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}a.d(e,"a",(function(){return n}))},d4ec:function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return r}))},dbb4:function(t,e,a){var r=a("23e7"),n=a("83ab"),o=a("56ef"),i=a("fc6a"),c=a("06cf"),s=a("8418");r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,r=i(t),n=c.f,u=o(r),f={},d=0;while(u.length>d)a=n(r,e=u[d++]),void 0!==a&&s(f,e,a);return f}})},e299:function(t,e,a){},e439:function(t,e,a){var r=a("23e7"),n=a("d039"),o=a("fc6a"),i=a("06cf").f,c=a("83ab"),s=n((function(){i(1)})),u=!c||s;r({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return i(o(t),e)}})},f2ed:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("van-tabs",{attrs:{color:"#ab7c37",sticky:!0,"title-active-color":"#ab7c37"},on:{change:t.toggleTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.navData,(function(t,e){return a("van-tab",{key:e,attrs:{title:t.title,name:t.name}})})),1),t.orderData.length>0?[a("div",{staticClass:"bigbox"},[a("van-list",{attrs:{"finished-text":"已经到底了....",finished:t.finished},on:{load:t.loadData},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.orderData,(function(e,r){return a("div",{key:r,staticClass:"pro-box"},[a("div",{staticClass:"deal clearfix"},[a("div",{staticClass:"number fl"},[t._v(t._s(e.oid))]),1==e.status?[a("div",{staticClass:"fr",on:{click:function(a){return t.affirmorder(e.oid,r)}}},[t._v("确认收货")])]:[a("div",{staticClass:"fr clearfix"},[t._v(" 已收货 "),a("span",{staticClass:"fr delete-icon"},[a("van-icon",{attrs:{name:"delete"},on:{click:function(a){return t.deleteOrder(e.oid,r)}}})],1)])]],2),a("div",{staticClass:"pro"},t._l(e.data,(function(e,r){return a("div",{key:r,staticClass:"a clearfix"},[a("div",{staticClass:"pro-img fl"},[a("img",{staticClass:"auto-img",attrs:{src:e.smallImg,alt:""}})]),a("div",{staticClass:"pro-info fl"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"type"},[t._v(t._s(e.rule))]),a("div",{staticClass:"price-box clearfix"},[a("span",{staticClass:"price fl"},[t._v("￥"+t._s(e.price))]),a("span",{staticClass:"count fr"},[t._v("X"+t._s(e.count))])])])])})),0),a("div",{staticClass:"describe clearfix"},[a("div",{staticClass:"time fl"},[t._v(t._s(e.orderTime))]),a("div",{staticClass:"fr"},[t._v(" 共 "),a("span",{staticClass:"allcount"},[t._v(" "+t._s(e.count)+" ")]),t._v("件商品 合计: "),a("span",{staticClass:"allprice"},[t._v("￥"+t._s(e.total))])])])])})),0)],1)]:[a("div",{staticClass:"not-order"},[a("div",[a("div",{staticClass:"not-order-icon"},[a("van-icon",{attrs:{name:"description"}})],1),t.isLogin?a("div",[t._v("没有订单，赶紧去逛一逛！")]):a("div",[a("span",{staticClass:"login-text",on:{click:t.goState}},[t._v("登录，查看订单数据")])])])])]],2)},n=[],o=(a("4160"),a("c975"),a("159b"),a("5530")),i=a("fa7d"),c=a("2f62"),s={name:"Order",data:function(){return{activeName:"0",loading:!1}},created:function(){this.$store.commit("orderModule/changeData",{key:"orderData",value:{}}),this.getorderData(0)},computed:Object(o["a"])({isLogin:function(){return this.$store.state.isLogin}},Object(c["b"])("orderModule",["navData","orderData","count","finished","start","orderproData"])),methods:{loadData:function(){var t=this;setTimeout((function(){t.loading=!1,t.orderproData.length>=t.orderData.length?t.$store.commit("orderModule/changeData",{key:"finished",value:!0}):t.$store.commit("orderModule/loadShopcartData")}),1e3)},goState:function(){this.$router.push({name:"Login"})},getorderData:function(t){var e=this,a=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:a,status:t}}).then((function(t){if(e.$toast.clear(),e.$store.commit("changeData",{key:"isLogin",value:700!=t.data.code}),700!=t.data.code){var a=[],r=[];t.data.result.forEach((function(t){-1===r.indexOf(t.oid)&&r.push(t.oid)})),r.forEach((function(e){var r={oid:e,count:0,total:0,data:[]};t.data.result.forEach((function(t){t.oid==e&&(r.data.push(t),r.count+=t.count,r.total+=t.count*t.price)})),r.orderTime=i["a"].formatDate(new Date(r.data[0].createdAt),"yyyy-MM-dd hh:mm:ss"),r.status=r.data[0].status,a.push(r)})),a.sort((function(t,e){return new Date(e.orderTime)-new Date(t.orderTime)})),e.$store.commit("orderModule/changeData",{key:"orderData",value:a})}})).catch((function(t){e.$toast.clear()}))},affirmorder:function(t,e){var a=this,r=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"POST",url:"/receive",data:{appkey:this.appkey,tokenString:r,oid:t},transformRequest:i["a"].transformRequest}).then((function(t){a.$toast.clear(),a.orderData[e].status=2,1==a.activeName&&a.$store.commit("orderModule/removeOrderData",e)})).catch((function(t){a.$toast.clear()}))},toggleTab:function(t){this.getorderData(t)},deleteOrder:function(t,e){var a=this,r=localStorage.getItem("_t");this.$toast.loading({forbidClick:!0,duration:0,message:"加载中..."}),this.axios({method:"POST",url:"/removeOrder",data:{appkey:this.appkey,tokenString:r,oid:t},transformRequest:i["a"].transformRequest}).then((function(t){a.$toast.clear(),a.$store.commit("orderModule/removeOrderData",e)})).catch((function(t){a.$toast.clear()}))}}},u=s,f=(a("4d70"),a("2877")),d=Object(f["a"])(u,r,n,!1,null,"243fd8ec",null);e["default"]=d.exports},fa7d:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("4160"),a("a15b"),a("fb6a"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("159b");var r=a("d4ec"),n=a("bee2"),o=function(){function t(){Object(r["a"])(this,t)}return Object(n["a"])(t,[{key:"transformRequest",value:function(t){var e="";for(var a in t)e+=a+"="+t[a]+"&";return e}},{key:"getCookies",value:function(t,e){var a={};return t.forEach((function(t){a[t]=e.$cookies.get(t)})),a}},{key:"getToken",value:function(t){var e=["t0","t1","t2"],a=[];return e.forEach((function(e){a.push(t.$cookies.get(e))})),a.join(".")}},{key:"formatDate",value:function(t,e){var a=t.getFullYear().toString();if(/(y+)/.test(e)){var r=RegExp.$1;e=e.replace(r,a.slice(a.length-r.length))}var n={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var o in n){var i=new RegExp("(".concat(o,"{1,2})"));if(i.test(e)){var c=RegExp.$1,s=n[o]>=10||1==c.length?n[o]:"0"+n[o];e=e.replace(c,s)}}return e}}]),t}(),i=new o}}]);
//# sourceMappingURL=chunk-17aa5230.4ce2a11f.js.map